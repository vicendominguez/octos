agent:
  cmd: "kiro-cli"
  args: ["chat", "--no-interactive", "--trust-all-tools", "--wrap=always"]

context:
  role: "Code analyzer"

steps:
  - name: check-tests
    prompt: |
      Check if there are test files in this directory.
      Answer with just "yes" or "no".
    save_to: test-check.txt

  - name: analyze-structure
    prompt: |
      Analyze the project structure and list main files.
      Keep it brief (max 5 lines).
    save_to: structure.txt

  - name: suggest-tests
    when: "{{check-tests.output}} contains no"
    load_from: structure.txt
    prompt: |
      Based on this structure:
      {{artifact.structure}}
      
      Suggest what tests should be added (just list, don't implement).

  - name: summary
    load_from: structure.txt
    prompt: |
      Create a brief summary of the project based on:
      {{artifact.structure}}
